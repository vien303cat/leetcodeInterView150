<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>55_Jump Game</title>

    <!--
        55. Jump Game
    Medium
    Topics
    Companies
    You are given an integer array nums. You are initially positioned at the array's first index, and each element in the array represents your maximum jump length at that position.
    
    Return true if you can reach the last index, or false otherwise.
    
    
    
    Example 1:
    
    Input: nums = [2,3,1,1,4]
    Output: true
    Explanation: Jump 1 step from index 0 to 1, then 3 steps to the last index.
    Example 2:
    
    Input: nums = [3,2,1,0,4]
    Output: false
    Explanation: You will always arrive at index 3 no matter what. Its maximum jump length is 0, which makes it impossible to reach the last index.
    
    
    Constraints:
    
    1 <= nums.length <= 104
    0 <= nums[i] <= 105 
    -->


</head>
<body>
    <script>


        /**
         * @param {number[]} nums
         * @return {boolean}
         */
        var canJump = function(nums) {
            console.log(nums.length);
            //總共需要跳幾格
            const total  = nums.length - 1 ;
            // 目前跳了幾格(用來跟total比對 超過即結束)
            let nowTotal = 0 ;
            // 下次跳躍
            let nextJump = 0 ;
            // 暫存跳躍值
            let JumpVal = 0 ;

            for(let i = 0 ; i <= nums.length ; i++){
                // console.log('total:'+nums,'nowVal:'+nums[i],'nowIndex:'+i,'nowTotal:'+nowTotal);
                nextJump = 0 ;
                JumpVal  = 0 ;

                //判斷是否有超過終點的
                if(i >= total || nums[i] >= total){
                    // console.log(`超過終點:總共需跳 ${total}  第 ${i} 格可以跳${nums[i]} `);
                    // console.log('true');
                    return true;
                }

                //分算跳到哪下一步可以跳最大格
                for(let j = 1 ; j <= nums[i] ; j++){

                    // 儲存下次可跳躍最大格數的次序
                    console.log(`i=${i}   ${j} +  ${nums[i+j]} > ${JumpVal}`);
                    if(j + nums[i+j] > JumpVal ){
                        // console.log(`j=${j} nums[${i}+${j}] = ${nums[i+j]} jumpVal=${JumpVal}`);
                        JumpVal  = j + nums[i+j] ;
                        nextJump = j ; 
                        // console.log(`JumpVal = ${j + nums[i+j]}  nextJump = ${nextJump}  nums[i] = ${nums[i]} j = ${j}`);
                    }
                }
                

                //決定跳格
                if(nextJump == 0 ){
                    // 前面格全是0
                    // console.log('false');
                    return false;
                }else{
                    
                    console.log(`nowpos: ${i}, nextJump:${nextJump}`);
                    // 跳格
                    i += nextJump ;
                    nowTotal += nextJump;
                    console.log(`i: ${i}`);
                }
                i--;
            }
        };


        // canJump([2,3,1,1,4]);
        // canJump([3,2,1,0,4]);
        // canJump([0]);

    </script>
    
</body>
</html>